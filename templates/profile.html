{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        {% set profile_user = athlete if athlete else current_user %}

        <h3>Профіль користувача</h3>
        <hr class="border border-gray border-1 opacity-50">
        
        <div class="card shadow-sm p-4 hover">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong>ПІБ:</strong> {{ profile_user.fio }}
                </li>
                <li class="list-group-item">
                    <strong>Email (Логін):</strong> {{ profile_user.email }}
                </li>
                <li class="list-group-item">
                    <strong>Роль у системі:</strong> <span class="badge bg-{{ 'danger' if profile_user.role == 'Admin' else 'info' }}">{{ profile_user.role }}</span>
                </li>
                <li class="list-group-item">
                    <strong>Спортивний розряд:</strong> {{ profile_user.rank or 'Не вказано' }}
                </li>
                <li class="list-group-item">
                    <strong>Дата початку тренувань:</strong> {{ profile_user.start_date.strftime('%Y-%m-%d') }}
                </li>
            </ul>
        </div>

        {% if athlete and current_user.role == 'Admin' %}
            
            <h3 class="mt-5 mb-3">Список луків {{profile_user.fio}}</h3>
            <hr class="border border-gray border-1 opacity-50">
        
            {% if not bows %}
            <div class="alert alert-warning">
                {{profile_user.fio}} ще не має зареєстрованих луків.
            </div>
            {% else %}
            
            <table class="table table-striped table-hover table-sm">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>Назва</th>
                        <th>Модель</th>
                        <th>Сила натяга</th>
                    </tr>
                </thead>
                <tbody>
                    {% for bow in bows %}
                    <tr>
                        <td>{{ bow.id }}</td>
                        <td>{{ bow.name }}</td>
                        <td>{{ bow.model }}</td>
                        <td>{{ bow.draw_weight }}</td>
                        {# 
                        <td>
                            <a href="{{ url_for('edit_bow', bow_id=bow.id) }}" class="btn btn-sm btn-warning">Редагувати</a>
                            
                            <form method="POST" action="{{ url_for('delete_bow', bow_id=bow.id) }}" style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Ви впевнені, що хочете видалити лук {{ bow.name }}?')">Видалити</button>
                            </form>
                        </td> 
                        #}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            {% endif %}
        {% endif %}
        {% if athlete %}
        <a href="{{ url_for('all_athletes') }}" class="btn btn-outline-secondary mt-3">Назад до списку спортсменів</a>
        {% endif %}
        
    </div>
</div>
{% endblock %}