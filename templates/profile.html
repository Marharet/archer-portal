{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        {% set profile_user = athlete if athlete else current_user %}

        <h3>üë§ –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</h3>
        <hr class="border border-gray border-1 opacity-50">
        
        <div class="card shadow-sm p-4 hover">
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <strong>–ü–Ü–ë:</strong> {{ profile_user.fio }}
                </li>
                <li class="list-group-item">
                    <strong>Email (–õ–æ–≥—ñ–Ω):</strong> {{ profile_user.email }}
                </li>
                <li class="list-group-item">
                    <strong>–†–æ–ª—å —É —Å–∏—Å—Ç–µ–º—ñ:</strong> <span class="badge bg-{{ 'danger' if profile_user.role == 'Admin' else 'info' }}">{{ profile_user.role }}</span>
                </li>
                <li class="list-group-item">
                    <strong>–°–ø–æ—Ä—Ç–∏–≤–Ω–∏–π —Ä–æ–∑—Ä—è–¥:</strong> {{ profile_user.rank or '–ù–µ –≤–∫–∞–∑–∞–Ω–æ' }}
                </li>
                <li class="list-group-item">
                    <strong>–î–∞—Ç–∞ –ø–æ—á–∞—Ç–∫—É —Ç—Ä–µ–Ω—É–≤–∞–Ω—å:</strong> {{ profile_user.start_date.strftime('%Y-%m-%d') }}
                </li>
            </ul>
        </div>

        {% if athlete and current_user.role == 'Admin' %}
            
            <h3 class="mt-5 mb-3">üèπ –°–ø–∏—Å–æ–∫ –ª—É–∫—ñ–≤ {{profile_user.fio}}</h3>
            <hr class="border border-gray border-1 opacity-50">
        
            {% if not bows %}
            <div class="alert alert-warning">
                {{profile_user.fio}} —â–µ –Ω–µ –º–∞—î –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –ª—É–∫—ñ–≤.
            </div>
            {% else %}
            
            <table class="table table-striped table-hover table-sm">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>–ù–∞–∑–≤–∞</th>
                        <th>–ú–æ–¥–µ–ª—å</th>
                        <th>–°–∏–ª–∞ –Ω–∞—Ç—è–≥–∞</th>
                        {# <th>–î—ñ—ó</th> #}
                    </tr>
                </thead>
                <tbody>
                    {% for bow in bows %}
                    <tr>
                        <td>{{ bow.id }}</td>
                        <td>{{ bow.name }}</td>
                        <td>{{ bow.model }}</td>
                        <td>{{ bow.draw_weight }}</td>
                        {# 
                        <td>
                            <a href="{{ url_for('edit_bow', bow_id=bow.id) }}" class="btn btn-sm btn-warning">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                            
                            <form method="POST" action="{{ url_for('delete_bow', bow_id=bow.id) }}" style="display:inline;">
                                <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –ª—É–∫ {{ bow.name }}?')">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                            </form>
                        </td> 
                        #}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            {% endif %}
        {% endif %}
        {% if athlete %}
        <a href="{{ url_for('all_athletes') }}" class="btn btn-outline-secondary mt-3">–ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ñ–≤</a>
        {% endif %}
        
    </div>
</div>
{% endblock %}